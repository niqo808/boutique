<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nuestras Sucursales - La Paz</title>
    
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" 
          integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" 
          crossorigin=""/>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <!-- Estilos personalizados -->
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/sucursales.css">
    
    <style>
        /* Estilos adicionales para Leaflet markers customizados */
        .custom-marker {
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        
        .marker-pin {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #B33A3A, #8B2C2C);
            border-radius: 50% 50% 50% 0;
            transform: rotate(-45deg);
            box-shadow: 
                0 4px 16px rgba(179, 58, 58, 0.6),
                0 0 20px rgba(179, 58, 58, 0.4);
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            animation: bounceInMarker 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }
        
        @keyframes bounceInMarker {
            0% {
                transform: rotate(-45deg) scale(0);
                opacity: 0;
            }
            50% {
                transform: rotate(-45deg) scale(1.2);
            }
            100% {
                transform: rotate(-45deg) scale(1);
                opacity: 1;
            }
        }
        
        .marker-pin::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(45deg);
            width: 20px;
            height: 20px;
            background: #FFFEF8;
            border-radius: 50%;
            box-shadow: 0 0 8px rgba(255, 255, 255, 0.8);
        }
        
        .marker-pin::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100%;
            height: 100%;
            border-radius: 50% 50% 50% 0;
            border: 2px solid rgba(255, 255, 255, 0.3);
            animation: pulseRing 2s infinite;
        }
        
        @keyframes pulseRing {
            0% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 1;
            }
            100% {
                transform: translate(-50%, -50%) scale(1.5);
                opacity: 0;
            }
        }
        
        .marker-pin:hover {
            transform: rotate(-45deg) scale(1.2);
            box-shadow: 
                0 8px 24px rgba(179, 58, 58, 0.8),
                0 0 32px rgba(179, 58, 58, 0.6);
        }
        
        .marker-pin.active {
            animation: pulseActive 1.5s infinite;
        }
        
        @keyframes pulseActive {
            0%, 100% {
                transform: rotate(-45deg) scale(1);
            }
            50% {
                transform: rotate(-45deg) scale(1.15);
            }
        }
        
        /* Tooltip personalizado de Leaflet */
        .leaflet-tooltip-own {
            background: rgba(45, 45, 45, 0.95);
            backdrop-filter: blur(10px);
            color: #C29958;
            border: 1px solid rgba(194, 153, 88, 0.3);
            border-radius: 8px;
            padding: 8px 12px;
            font-weight: 600;
            font-size: 0.9rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }
        
        .leaflet-tooltip-own::before {
            border-top-color: rgba(45, 45, 45, 0.95);
        }
    </style>
</head>
<body>
    
    <nav id="navbar">
        <div class="nav-container">
            <a href="../index.html" class="logo title">
                <div class="brand-icon">
                    <img src="../images/logo.png" alt="Logo La Paz" class="logo-img">
                </div>
            </a>
            <ul class="nav-links" id="navLinks">
                <li><a href="../index.html">Inicio</a></li>
                <li><a href="sobre-nosotros.html" class="active">Nosotros</a></li>
                <li><a href="productos.html">Productos</a></li>
                <li><a href="sucursales.html">Sucursales</a></li>
                <li><a href="contacto.html">Contacto</a></li>
                <li><a href="sistema.html">Acceso al Sistema</a></li>
            </ul>
            <div class="menu-toggle" id="menuToggle">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>
    
    <!-- P√°gina de Sucursales -->
    <div class="sucursales-page">
        
        <!-- Header Flotante -->
        <div class="floating-header">
            <h1>Nuestras Sucursales</h1>
            <p>Contamos con 6 sucursales ‚Äî encontr√° la boutique m√°s cercana</p>
        </div>
        
        <!-- Mapa con Leaflet -->
        <div id="map-container">
            <div id="map"></div>
        </div>
        
        <!-- Lista de Sucursales (Sidebar) -->
        <div class="sucursales-list">
            <div class="list-header">üìç Todas las Sucursales</div>

            <button id="sucursalToggle" class="sucursal-toggle-btn" aria-expanded="true" aria-controls="sucursales-list">
                <i class="fas fa-chevron-left"></i>
                <span class="sr-only">Mostrar/Ocultar sucursales</span>
            </button>
            
            <div class="sucursal-item" data-sucursal="1">
                <h3>Sucursal Casa Central</h3>
                <p>VILLA ROSA ‚Äî Esquina Moreno y Sarmiento</p>
            </div>

            <div class="sucursal-item" data-sucursal="2">
                <h3>Sucursal II</h3>
                <p>VILLA DE MAYO ‚Äî Eva Per√≥n 4505</p>
            </div>

            <div class="sucursal-item" data-sucursal="3">
                <h3>Sucursal III</h3>
                <p>VILLA ROSA ‚Äî Esquina Almirante Brown y Descalzi</p>
            </div>

            <div class="sucursal-item" data-sucursal="4">
                <h3>Sucursal IV</h3>
                <p>ADOLFO SOURDEAUX ‚Äî Derqui 1242</p>
            </div>

            <div class="sucursal-item" data-sucursal="5">
                <h3>Sucursal V</h3>
                <p>MATHEU ‚Äî San Martin 262</p>
            </div>

            <div class="sucursal-item" data-sucursal="6">
                <h3>Sucursal VI</h3>
                <p>DON TORCUATO ‚Äî Triunvirato 1596 (esquina Chile)</p>
            </div>
        </div>
        
        <!-- Card Flotante -->
        <div class="sucursal-card-floating" id="floating-card">
            <!-- Contenido generado din√°micamente -->
        </div>
        
    </div>
    
    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" 
            integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" 
            crossorigin=""></script>
    
    <!-- JavaScript Principal -->
    <script>
        // ============================================
        // DATOS DE LAS 6 SUCURSALES
        // ============================================
        const sucursales = [
            { id: 1, nombre: "Sucursal Casa Central", zona: "VILLA ROSA", lat: -34.4187, lng: -58.87039, direccion: "Esquina Moreno y Sarmiento, Villa Rosa", telefono: "+54 9 11 6161-4015", email: "info@lapaz.com.ar", horario: "Lun-Vie: 08:00-13:00 / 16:30-21:00 | S√°b: 08:00-21:00 | Dom: 08:00-13:00", horarioDetalle: { lunes: [{ inicio: "08:00", fin: "13:00" }, { inicio: "16:30", fin: "21:00" }], martes: [{ inicio: "08:00", fin: "13:00" }, { inicio: "16:30", fin: "21:00" }], miercoles: [{ inicio: "08:00", fin: "13:00" }, { inicio: "16:30", fin: "21:00" }], jueves: [{ inicio: "08:00", fin: "13:00" }, { inicio: "16:30", fin: "21:00" }], viernes: [{ inicio: "08:00", fin: "13:00" }, { inicio: "16:30", fin: "21:00" }], sabado: [{ inicio: "08:00", fin: "21:00" }], domingo: [{ inicio: "08:00", fin: "13:00" }] }, servicios: ["Venta minorista", "Delivery"], imagenes: ["images/carne.jpg","images/carne4.jpg","images/carne7.jpg"] },
            { id: 2, nombre: "Sucursal II", zona: "VILLA DE MAYO", lat: -34.49735, lng: -58.67554, direccion: "Eva Per√≥n 4505, Villa de Mayo", telefono: "+54 9 11 6161-4015", email: "info@lapaz.com.ar", horario: "Lun-Vie: 08:00-13:00 / 16:30-21:00 | S√°b: 08:00-21:00 | Dom: 08:00-13:00", horarioDetalle: { lunes: [{ inicio: "08:00", fin: "13:00" }, { inicio: "16:30", fin: "21:00" }], martes: [{ inicio: "08:00", fin: "13:00" }, { inicio: "16:30", fin: "21:00" }], miercoles: [{ inicio: "08:00", fin: "13:00" }, { inicio: "16:30", fin: "21:00" }], jueves: [{ inicio: "08:00", fin: "13:00" }, { inicio: "16:30", fin: "21:00" }], viernes: [{ inicio: "08:00", fin: "13:00" }, { inicio: "16:30", fin: "21:00" }], sabado: [{ inicio: "08:00", fin: "21:00" }], domingo: [{ inicio: "08:00", fin: "13:00" }] }, servicios: ["Venta minorista", "Delivery"], imagenes: ["images/lomo.jpg","images/carne.jpg","images/carne4.jpg"] },
            { id: 3, nombre: "Sucursal III", zona: "VILLA ROSA", lat: -34.41179, lng: -58.87499, direccion: "Esquina Almirante Brown y Descalzi, Villa Rosa", telefono: "+54 9 11 6161-4015", email: "info@lapaz.com.ar", horario: "Lun-Vie: 08:00-13:00 / 16:30-21:00 | S√°b: 08:00-21:00 | Dom: 08:00-13:00", horarioDetalle: { lunes: [{ inicio: "08:00", fin: "13:00" }, { inicio: "16:30", fin: "21:00" }], martes: [{ inicio: "08:00", fin: "13:00" }, { inicio: "16:30", fin: "21:00" }], miercoles: [{ inicio: "08:00", fin: "13:00" }, { inicio: "16:30", fin: "21:00" }], jueves: [{ inicio: "08:00", fin: "13:00" }, { inicio: "16:30", fin: "21:00" }], viernes: [{ inicio: "08:00", fin: "13:00" }, { inicio: "16:30", fin: "21:00" }], sabado: [{ inicio: "08:00", fin: "21:00" }], domingo: [{ inicio: "08:00", fin: "13:00" }] }, servicios: ["Venta minorista", "Delivery"], imagenes: ["images/bife_ancho.jpg","images/lomo.jpg","images/carne7.jpg"] },
            { id: 4, nombre: "Sucursal IV", zona: "ADOLFO SOURDEAUX", lat: -34.50318, lng: -58.6671, direccion: "Derqui 1242, Adolfo Sourdeaux", telefono: "+54 9 11 6161-4015", email: "info@lapaz.com.ar", horario: "Lun-Vie: 08:00-13:00 / 16:30-21:00 | S√°b: 08:00-21:00 | Dom: 08:00-13:00", horarioDetalle: { lunes: [{ inicio: "08:00", fin: "13:00" }, { inicio: "16:30", fin: "21:00" }], martes: [{ inicio: "08:00", fin: "13:00" }, { inicio: "16:30", fin: "21:00" }], miercoles: [{ inicio: "08:00", fin: "13:00" }, { inicio: "16:30", fin: "21:00" }], jueves: [{ inicio: "08:00", fin: "13:00" }, { inicio: "16:30", fin: "21:00" }], viernes: [{ inicio: "08:00", fin: "13:00" }, { inicio: "16:30", fin: "21:00" }], sabado: [{ inicio: "08:00", fin: "21:00" }], domingo: [{ inicio: "08:00", fin: "13:00" }] }, servicios: ["Venta minorista", "Delivery"], imagenes: ["images/carne4.jpg","images/bife_angosto.jpg","images/carne.jpg"] },
            { id: 5, nombre: "Sucursal V", zona: "MATHEU", lat: -34.38311, lng: -58.83012, direccion: "San Martin 262, Matheu", telefono: "+54 9 11 6161-4015", email: "info@lapaz.com.ar", horario: "Lun-Vie: 08:00-13:00 / 16:30-21:00 | S√°b: 08:00-21:00 | Dom: 08:00-13:00", horarioDetalle: { lunes: [{ inicio: "08:00", fin: "13:00" }, { inicio: "16:30", fin: "21:00" }], martes: [{ inicio: "08:00", fin: "13:00" }, { inicio: "16:30", fin: "21:00" }], miercoles: [{ inicio: "08:00", fin: "13:00" }, { inicio: "16:30", fin: "21:00" }], jueves: [{ inicio: "08:00", fin: "13:00" }, { inicio: "16:30", fin: "21:00" }], viernes: [{ inicio: "08:00", fin: "13:00" }, { inicio: "16:30", fin: "21:00" }], sabado: [{ inicio: "08:00", fin: "21:00" }], domingo: [{ inicio: "08:00", fin: "13:00" }] }, servicios: ["Venta minorista", "Delivery"], imagenes: ["images/carne7.jpg","images/carne4.jpg","images/lomo.jpg"] },
            { id: 6, nombre: "Sucursal VI", zona: "DON TORCUATO", lat: -34.48687, lng: -58.614, direccion: "Triunvirato 1596, esquina Chile, Don Torcuato", telefono: "+54 9 11 6161-4015", email: "info@lapaz.com.ar", horario: "Lun-Vie: 08:00-13:00 / 16:30-21:00 | S√°b: 08:00-21:00 | Dom: 08:00-13:00", horarioDetalle: { lunes: [{ inicio: "08:00", fin: "13:00" }, { inicio: "16:30", fin: "21:00" }], martes: [{ inicio: "08:00", fin: "13:00" }, { inicio: "16:30", fin: "21:00" }], miercoles: [{ inicio: "08:00", fin: "13:00" }, { inicio: "16:30", fin: "21:00" }], jueves: [{ inicio: "08:00", fin: "13:00" }, { inicio: "16:30", fin: "21:00" }], viernes: [{ inicio: "08:00", fin: "13:00" }, { inicio: "16:30", fin: "21:00" }], sabado: [{ inicio: "08:00", fin: "21:00" }], domingo: [{ inicio: "08:00", fin: "13:00" }] }, servicios: ["Venta minorista", "Delivery"], imagenes: ["images/bife_angosto.jpg","images/carne.jpg","images/bife_ancho.jpg"] }
        ];
        
        // ============================================
        // VARIABLES GLOBALES
        // ============================================
        let map;
        let markers = [];
        let currentImageIndex = {};
        
        // ============================================
        // INICIALIZAR MAPA CON LEAFLET
        // ============================================
        function initMap() {
            // Centro del mapa ‚Äî zona de sucursales (promedio de coordenadas)
            const center = [-34.45, -58.76];
            
            // Crear mapa
            map = L.map('map', {
                center: center,
                zoom: 11,
                zoomControl: true,
                attributionControl: true
            });
            
            // A√±adir capa de OpenStreetMap
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '¬© OpenStreetMap contributors',
                maxZoom: 19
            }).addTo(map);
            
            // Crear marcadores para cada sucursal
            sucursales.forEach((sucursal, index) => {
                // Icono: preferimos logo.svg (fallback si no existe puede ser logo.png)
                const logoUrl = '../images/logo.svg';
                const logoIcon = L.icon({
                    iconUrl: logoUrl,
                    iconSize: [48, 48],
                    iconAnchor: [24, 48],
                    popupAnchor: [0, -48],
                    className: 'logo-marker'
                });

                // Crear marcador con icono de logo
                const marker = L.marker([sucursal.lat, sucursal.lng], {
                    icon: logoIcon,
                    sucursalId: sucursal.id
                }).addTo(map);

                // Tooltip al hover
                marker.bindTooltip(sucursal.nombre, {
                    permanent: false,
                    direction: 'top',
                    className: 'leaflet-tooltip-own',
                    offset: [0, -48]
                });

                // Click en marcador
                marker.on('click', function() {
                    showSucursalCard(sucursal);
                });

                // Guardar referencia
                markers.push({ marker, sucursal });

                // A√±adir dataset y peque√±os ajustes al elemento del icono cuando est√© disponible
                setTimeout(() => {
                    const el = marker.getElement();
                    if (el) {
                        el.dataset.sucursalId = sucursal.id;
                        el.style.transition = 'transform 0.25s ease, filter 0.25s ease';
                        el.style.transformOrigin = 'center bottom';
                        el.style.animationDelay = `${index * 0.08}s`;
                    }
                }, 50);
            });
        }
        
        // ============================================
        // MOSTRAR CARD DE SUCURSAL
        // ============================================
        function showSucursalCard(sucursal) {
            const card = document.getElementById('floating-card');
            
            // Resetear √≠ndice de imagen
            currentImageIndex[sucursal.id] = 0;
            
            // Generar HTML del card
            card.innerHTML = `
                <div class="card-header">
                    <button class="close-btn" onclick="closeCard()">
                        <i class="fas fa-times"></i>
                    </button>
                    
                    <div class="sucursal-numero-badge">${sucursal.id}</div>
                    
                    <h2>${sucursal.nombre}</h2>
                    <p class="zona">${sucursal.zona}</p>
                </div>
                
                <div class="gallery-swiper">
                    <div class="gallery-track" id="gallery-track-${sucursal.id}">
                        ${sucursal.imagenes.map(img => `
                            <div class="gallery-slide">
                                <img src="${img}" alt="${sucursal.nombre}" onerror="this.src='images/carne.jpg'">
                            </div>
                        `).join('')}
                    </div>
                    
                    <button class="gallery-arrow prev" onclick="prevImage(${sucursal.id})">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <button class="gallery-arrow next" onclick="nextImage(${sucursal.id})">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                    
                    <div class="gallery-controls">
                        ${sucursal.imagenes.map((img, idx) => `
                            <div class="gallery-dot ${idx === 0 ? 'active' : ''}" 
                                 onclick="goToImage(${sucursal.id}, ${idx})"></div>
                        `).join('')}
                    </div>
                </div>
                
                <div class="card-body">
                    <div class="info-item">
                        <div class="info-icon">
                            <i class="fas fa-map-marker-alt"></i>
                        </div>
                        <div class="info-content">
                            <h4>Direcci√≥n</h4>
                            <p>${sucursal.direccion}</p>
                        </div>
                    </div>
                    
                    <div class="info-item">
                        <div class="info-icon">
                            <i class="fas fa-phone"></i>
                        </div>
                        <div class="info-content">
                            <h4>Tel√©fono</h4>
                            <p>${sucursal.telefono}</p>
                        </div>
                    </div>
                    
                    <div class="info-item">
                        <div class="info-icon">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="info-content">
                            <h4>Horario</h4>
                            <p>${sucursal.horario}</p>
                            ${getHorarioBadge(sucursal)}
                        </div>
                    </div>
                    
                    <div class="info-item">
                        <div class="info-icon">
                            <i class="fas fa-envelope"></i>
                        </div>
                        <div class="info-content">
                            <h4>Email</h4>
                            <p>${sucursal.email}</p>
                        </div>
                    </div>
                    
                    <div class="servicios-list">
                        ${sucursal.servicios.map(servicio => `
                            <span class="servicio-tag">${servicio}</span>
                        `).join('')}
                    </div>
                </div>
                
                <div class="action-buttons">
                    <a href="https://www.google.com/maps/dir/?api=1&destination=${sucursal.lat},${sucursal.lng}" 
                       target="_blank" class="btn-action btn-direcciones">
                        <span>
                            <i class="fas fa-directions"></i>
                            C√≥mo llegar
                        </span>
                    </a>
                    
                          <a href="https://wa.me/5491161614015" 
                              target="_blank" class="btn-action btn-whatsapp">
                        <span>
                            <i class="fab fa-whatsapp"></i>
                            WhatsApp
                        </span>
                    </a>
                </div>
            `;
            
            // Mostrar card con animaci√≥n
            setTimeout(() => {
                card.classList.add('show');
            }, 100);
            
            // Centrar mapa en la sucursal con animaci√≥n suave
            map.flyTo([sucursal.lat, sucursal.lng], 15, {
                duration: 1.5,
                easeLinearity: 0.25
            });
            
            // Activar pin
            document.querySelectorAll('.logo-marker').forEach(pin => {
                pin.classList.remove('active');
            });
            const activePin = document.querySelector(`.logo-marker[data-sucursal-id="${sucursal.id}"]`);
            if (activePin) {
                activePin.classList.add('active');
            }
            
            // Activar item de lista
            document.querySelectorAll('.sucursal-item').forEach(item => {
                item.classList.remove('active');
            });
            const activeItem = document.querySelector(`.sucursal-item[data-sucursal="${sucursal.id}"]`);
            if (activeItem) {
                activeItem.classList.add('active');
            }
        }
        
        // ============================================
        // CERRAR CARD
        // ============================================
        function closeCard() {
            const card = document.getElementById('floating-card');
            card.classList.remove('show');
            
            // Volver al centro y zoom original
            map.flyTo([-34.45, -58.76], 11, {
                duration: 1.5,
                easeLinearity: 0.25
            });
            
            // Desactivar todos los pins
            document.querySelectorAll('.logo-marker').forEach(pin => {
                pin.classList.remove('active');
            });
            
            // Desactivar items de lista
            document.querySelectorAll('.sucursal-item').forEach(item => {
                item.classList.remove('active');
            });
        }
        
        // ============================================
        // GALER√çA SWIPEABLE
        // ============================================
        function nextImage(sucursalId) {
            const sucursal = sucursales.find(s => s.id === sucursalId);
            if (!currentImageIndex[sucursalId]) currentImageIndex[sucursalId] = 0;
            
            currentImageIndex[sucursalId] = (currentImageIndex[sucursalId] + 1) % sucursal.imagenes.length;
            updateGallery(sucursalId);
        }
        
        function prevImage(sucursalId) {
            const sucursal = sucursales.find(s => s.id === sucursalId);
            if (!currentImageIndex[sucursalId]) currentImageIndex[sucursalId] = 0;
            
            currentImageIndex[sucursalId] = 
                (currentImageIndex[sucursalId] - 1 + sucursal.imagenes.length) % sucursal.imagenes.length;
            updateGallery(sucursalId);
        }
        
        function goToImage(sucursalId, index) {
            currentImageIndex[sucursalId] = index;
            updateGallery(sucursalId);
        }
        
        function updateGallery(sucursalId) {
            const track = document.getElementById(`gallery-track-${sucursalId}`);
            const index = currentImageIndex[sucursalId] || 0;
            
            if (track) {
                track.style.transform = `translateX(-${index * 100}%)`;
                
                // Actualizar dots
                const dots = track.parentElement.querySelectorAll('.gallery-dot');
                dots.forEach((dot, idx) => {
                    dot.classList.toggle('active', idx === index);
                });
            }
        }
        
        // ============================================
        // VERIFICAR HORARIO
        // ============================================
        function getHorarioBadge(sucursal) {
            const ahora = new Date();
            const diaSemana = ['domingo', 'lunes', 'martes', 'miercoles', 'jueves', 'viernes', 'sabado'][ahora.getDay()];
            const horaActual = ahora.getHours() * 60 + ahora.getMinutes();
            
            const horario = sucursal.horarioDetalle ? sucursal.horarioDetalle[diaSemana] : null;

            // horario puede ser un arreglo de intervalos o un objeto con inicio/fin
            if (!horario) {
                return '<span class="horario-badge cerrado"><i class="fas fa-circle"></i> CERRADO</span>';
            }

            const intervals = Array.isArray(horario) ? horario : [horario];

            for (const intervalo of intervals) {
                if (!intervalo || !intervalo.inicio || !intervalo.fin) continue;
                const [horaInicio, minInicio] = intervalo.inicio.split(':').map(Number);
                const [horaFin, minFin] = intervalo.fin.split(':').map(Number);
                const minutosInicio = horaInicio * 60 + minInicio;
                const minutosFin = horaFin * 60 + minFin;

                if (horaActual >= minutosInicio && horaActual < minutosFin) {
                    return '<span class="horario-badge"><i class="fas fa-circle"></i> ABIERTO AHORA</span>';
                }
            }

            return '<span class="horario-badge cerrado"><i class="fas fa-circle"></i> CERRADO</span>';
        }
        
        // ============================================
        // INICIALIZACI√ìN
        // ============================================
        document.addEventListener('DOMContentLoaded', () => {
            // Inicializar mapa
            initMap();

            // Toggle sidebar button
            const sucursalToggle = document.getElementById('sucursalToggle');
            const sucursalesList = document.querySelector('.sucursales-list');
            if (sucursalToggle && sucursalesList) {
                sucursalToggle.addEventListener('click', () => {
                    const expanded = sucursalesList.classList.toggle('collapsed');
                    sucursalToggle.setAttribute('aria-expanded', (!expanded).toString());
                    const icon = sucursalToggle.querySelector('i');
                    if (icon) icon.classList.toggle('fa-chevron-left');
                    if (icon) icon.classList.toggle('fa-chevron-right');
                });
            }
            
            // Click en items de lista
            document.querySelectorAll('.sucursal-item').forEach(item => {
                item.addEventListener('click', () => {
                    const sucursalId = parseInt(item.dataset.sucursal);
                    const sucursal = sucursales.find(s => s.id === sucursalId);
                    if (sucursal) {
                        showSucursalCard(sucursal);
                    }
                });
            });
            
            // Cerrar card con ESC
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    closeCard();
                }
            });
        });
        
        // ============================================
        // MEN√ö MOBILE
        // ============================================
        const menuToggle = document.querySelector('.menu-toggle');
        const navLinks = document.querySelector('.nav-links');
        
        if (menuToggle) {
            menuToggle.addEventListener('click', () => {
                navLinks.classList.toggle('active');
            });
        }
    </script>

    <!-- Shared footer copied from site root (paths adjusted) -->
    <footer>
        <div class="footer-content">
            <div class="footer-section logo-container">
                <img src="../images/logo.png" class="logo" alt="Logo La Paz">
                <span class="logo-text">Excelencia en cada corte desde 1994</span>
            </div>

            <div class="footer-section">
                <h4>Enlaces R√°pidos</h4>
                <ul>
                    <li><a href="../index.html">Inicio</a></li>
                    <li><a href="sobre-nosotros.html">Nosotros</a></li>
                    <li><a href="productos.html">Productos</a></li>
                    <li><a href="sucursales.html">Sucursales</a></li>
                    <li><a href="contacto.html">Contacto</a></li>
                </ul>
            </div>

            <div class="footer-section">
                <h4>Contacto</h4>
                <p>üìç Esquina principal ‚Äî Zona</p>
                <p>üìû +54 9 11 6161-4015</p>
                <p>‚úâÔ∏è info@boutiquelapaz.com</p>
            </div>

            <div class="footer-section">
                <h4>Segu√≠nos</h4>
                <div class="social-links">
                    <a href="https://www.instagram.com/lapaz_carnepremium?igsh=MXM2M2xyMmZnc20wbw==" target="_blank" title="Instagram"><i class="fab fa-instagram"></i></a>
                    <a href="https://www.tiktok.com/@lapaz_carnepremium?_r=1&_t=ZM-92ubbZmFJr1" target="_blank" title="TikTok"><i class="fab fa-tiktok"></i></a>
                    <a href="https://wa.me/5491161614015" target="_blank" title="WhatsApp"><i class="fab fa-whatsapp"></i></a>
                </div>
            </div>
        </div>

        <div class="footer-bottom">
            <p>&copy; 2025 La Paz. Todos los derechos reservados.</p>
        </div>
    </footer>

</body>
</html>
